import pyrebase
from getpass import getpass

firebaseConfig = {
    "apiKey": "AIzaSyAxPJMK8k_AXhvzDc9j4nMiNad2DV-lQWw",
    "authDomain": "test-projec-5a491.firebaseapp.com",
    "databaseURL": "https://test-projec-5a491.firebaseio.com",
    "projectId": "test-projec-5a491",
    "storageBucket": "test-projec-5a491.appspot.com",
    "messagingSenderId": "953291752105",
    "appId": "1:953291752105:web:ecfa54ea190feddf7f1fb8",
    "measurementId": "G-HJZKBZLEKP"
}

firebase = pyrebase.initialize_app(firebaseConfig)

auth = firebase.auth()

email = input('email\n')
pw = getpass('pw\n')

#user = auth.create_user_with_email_and_password(email, pw)
# test1234
#https://www.youtube.com/watch?v=rKuGCQda_Qo
login = auth.sign_in_with_email_and_password(email, pw)
#auth.send_email_verification()
#auth.send_password_reset_email()
import requests

# importing the requests library
import requests

# api-endpoint
URL = "http://localhost:5000/"

fbTest = requests.get(url='รง', params={'test2':'test from backend'})
fbPut = requests.put(url='https://test-projec-5a491.firebaseio.com/users.json', data='{"id":"password2"}' )
print(fbPut.text)
print(fbTest.text)
# location given here
test = "test"

# defining a params dict for the parameters to be sent to the API
PARAMS = {'test': test}

# sending get request and saving the response as response object
r = requests.get(url=URL, params=PARAMS)

print(r.text)
# extracting data in json format
#data = r.json()

# extracting latitude, longitude and formatted address
# of the first matching location
"""
    latitude = data['results'][0]['geometry']['location']['lat']
longitude = data['results'][0]['geometry']['location']['lng']
formatted_address = data['results'][0]['formatted_address']

# printing the output
print("Latitude:%s\nLongitude:%s\nFormatted Address:%s" % (latitude, longitude, formatted_address))
"""

print('!')

"""
{
  "rules": {
    "users": {
      "$uid": {
        ".read": "$uid === auth.uid",
        ".write": "$uid === auth.uid"
      }
    }
  }
}
"""

# fbTest = requests.get(url='รง', params={'test2':'test from backend'})
# fbPut = requests.put(url='https://test-projec-5a491.firebaseio.com/users.json', data='{"id":"password2"}' )
# print(fbPut.text)
# print(fbTest.text)
# location given here
# test = "test"

# // DO NOT USE THIS CODE IN PRODUCTION AS IT DEPENDS ON AN INTERNAL 
# // IMPLEMENTATION DETAIL OF FIREBASE
# var PUSH_CHARS = "-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";
# function decode(id) {
#   id = id.substring(0,8);
#   var timestamp = 0;
#   for (var i=0; i < id.length; i++) {
#     var c = id.charAt(i);
#     timestamp = timestamp * 64 + PUSH_CHARS.indexOf(c);
#   }
#   return timestamp;
# }
# var key = prompt("Enter Firebase push ID");
# if (key) {
#   var timestamp = decode(key);
#   console.log(timestamp+"\n"+new Date(timestamp));
#   alert(timestamp+"\n"+new Date(timestamp));
# }

# curl "https://<DATABASE_NAME>.firebaseio.com/users/ada/name.json?auth=<ID_TOKEN>"

# defining a params dict for the parameters to be sent to the API
#PARAMS = {'test': test}

# sending get request and saving the response as response object
#r = requests.get(url=URL, params=PARAMS)

#print(r.text)
# extracting data in json format
#data = r.json()

# extracting latitude, longitude and formatted address
# of the first matching location
"""
    latitude = data['results'][0]['geometry']['location']['lat']
longitude = data['results'][0]['geometry']['location']['lng']
formatted_address = data['results'][0]['formatted_address']

# printing the output
print("Latitude:%s\nLongitude:%s\nFormatted Address:%s" % (latitude, longitude, formatted_address))
"""